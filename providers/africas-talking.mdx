---
title: Africa's Talking
description: Connect StarHash to Africa's Talking for USSD services in Kenya, Nigeria, Uganda, and Tanzania.
---

# Africa's Talking

[Africa's Talking](https://africastalking.com) is a leading USSD gateway serving multiple African countries.

## Supported Countries

| Country | Networks |
|---------|----------|
| Kenya | Safaricom, Airtel, Telkom |
| Nigeria | MTN, Airtel, Glo, 9mobile |
| Uganda | MTN, Airtel |
| Tanzania | Vodacom, Airtel, Tigo |

## Prerequisites

1. An Africa's Talking account
2. A USSD shortcode (sandbox or production)
3. API credentials from your dashboard

## Setup Steps

### Step 1: Get Your Credentials

1. Log in to [Africa's Talking Dashboard](https://account.africastalking.com)
2. Go to **Settings** → **API Key**
3. Copy your **Username** and **API Key**

### Step 2: Configure in StarHash

1. In StarHash Studio, go to **Settings** → **Providers**
2. Click **Add Provider**
3. Select **Africa's Talking**
4. Enter your credentials:

| Field | Value |
|-------|-------|
| Username | Your AT username |
| API Key | Your API key |
| Environment | Sandbox or Production |

5. Click **Save**

### Step 3: Set Up Callback URL

1. In Africa's Talking Dashboard, go to **USSD** → **Callback URLs**
2. Enter your StarHash callback URL:

```
https://api.starhash.dev/hooks/africas_talking/{instance_id}
```

<Info>
  Find your instance ID in StarHash under **Instances** → select your instance → **Settings**.
</Info>

3. Click **Save**

### Step 4: Deploy Your Flow

1. In StarHash Studio, open your flow
2. Click **Deploy**
3. Select the Africa's Talking instance
4. Click **Publish**

## Sandbox Testing

Africa's Talking provides a free sandbox for testing:

### Enable Sandbox

1. In your AT dashboard, switch to **Sandbox**
2. Use your sandbox API key in StarHash
3. Use the simulator in AT dashboard to test

### Sandbox Limitations

- No real USSD traffic
- Limited to simulator testing
- Free, no charges

## Request/Response Format

### Incoming Request

Africa's Talking sends this format:

```
POST /hooks/africas_talking/{instance_id}
Content-Type: application/x-www-form-urlencoded

sessionId=ATUid_xxx
&phoneNumber=%2B254701234567
&text=1*2*100
&serviceCode=*384*123#
```

| Field | Description |
|-------|-------------|
| `sessionId` | Unique session identifier |
| `phoneNumber` | User's phone (E.164 format) |
| `text` | User input (concatenated with `*`) |
| `serviceCode` | Your shortcode |

### Response Format

StarHash responds with:

```
CON Select an option:
1. Check Balance
2. Send Money
```

| Prefix | Meaning |
|--------|---------|
| `CON` | Continue session (expect more input) |
| `END` | End session (final message) |

## Session Behavior

### Text Concatenation

Africa's Talking concatenates all inputs with `*`:

```
User dials: *384*123#
First input: 1
Text value: "1"

Second input: 2
Text value: "1*2"

Third input: 100
Text value: "1*2*100"
```

StarHash handles this automatically - you work with individual inputs.

### Session Timeout

- Sessions timeout after **3 minutes** of inactivity
- Timeout triggers an implicit `END`
- StarHash marks the session as `timeout`

## Error Handling

### Common Errors

| Error | Cause | Solution |
|-------|-------|----------|
| `InvalidCallback` | Wrong callback URL | Verify the URL format |
| `InvalidCredentials` | Wrong API key | Check credentials in settings |
| `SessionNotFound` | Expired session | Sessions last 3 minutes |

### Retry Logic

If StarHash fails to respond:

1. Africa's Talking waits 30 seconds
2. If no response, session ends with error
3. User sees a generic error message

## Best Practices

1. **Keep responses fast** - Respond within 10 seconds
2. **Handle timeouts** - Design flows for 3-minute sessions
3. **Test in sandbox** - Always test before production
4. **Monitor errors** - Check StarHash analytics for failures

## Pricing

Africa's Talking charges per session:

| Country | Cost per Session |
|---------|-----------------|
| Kenya | ~KES 0.50 |
| Nigeria | ~NGN 2.00 |
| Uganda | ~UGX 50 |

Check [Africa's Talking Pricing](https://africastalking.com/pricing) for current rates.

## Next Steps

<Cards>
  <Card title="Deployment" icon="rocket" href="/studio/deployment">
    Deploy your flow
  </Card>
  <Card title="Webhooks" icon="webhook" href="/engine/webhooks">
    Advanced webhook configuration
  </Card>
</Cards>
